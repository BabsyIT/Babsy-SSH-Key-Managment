# Configuration Directory

⚠️ **IMPORTANT:** Real configuration files with actual data are **git-ignored** for security!

## Files in This Directory

### Template Files (Committed to Git)
- ✅ `examples/*.example` - Template/example files (safe to commit)

### Real Config Files (NOT in Git)
- ❌ `user-mapping.json` - **Real user data** (generated by M365 sync or manually created)
- ❌ `m365-config.json` - **Real M365 credentials** (never commit!)

## Setup Instructions

### For Production (GitHub Actions + Ansible)

**You don't need to create these files!** Everything is configured via GitHub Secrets.

See: [PRODUCTION-DEPLOYMENT.md](../PRODUCTION-DEPLOYMENT.md)

### For Local Testing (NOT for Production)

```bash
# Create user-mapping.json from example
cp examples/user-mapping.json.example user-mapping.json
nano user-mapping.json  # Edit with test data

# For M365 testing (optional)
cp examples/m365-config.json.example m365-config.json
nano m365-config.json  # Edit with test credentials

# NEVER commit these files!
# They are already in .gitignore
```

## Security

### ⚠️ This Repository is PUBLIC

**NEVER commit:**
- ❌ Real usernames, emails (GDPR/DSGVO!)
- ❌ M365 credentials
- ❌ API tokens or secrets
- ❌ Internal IP addresses
- ❌ Real hostnames

**Only commit:**
- ✅ Template files (`.example`)
- ✅ Documentation
- ✅ Scripts (without credentials)

See: [SECURITY.md](../SECURITY.md) for complete security policy.

## Files Explained

### user-mapping.json

**Purpose:** Maps M365 users to local Linux users with SSH keys and sudo rights

**Source:**
- Generated automatically by M365 sync (production)
- Created manually from template (testing)

**Example:**
```json
{
  "users": [
    {
      "github_user": "username-github",
      "local_user": "username",
      "full_name": "User Name",
      "sudo_access": "limited",
      "groups": ["users", "sudo", "docker"]
    }
  ]
}
```

**Security:** Contains real usernames/emails → NEVER commit to public repo!

### m365-config.json

**Purpose:** M365 API credentials (local testing only)

**NOT NEEDED for production!** Use GitHub Secrets instead.

**Example:**
```json
{
  "tenant_id": "tenant.onmicrosoft.com",
  "client_id": "app-client-id",
  "client_secret": "secret"
}
```

**Security:** Contains credentials → NEVER commit! Use GitHub Secrets in production.

## Troubleshooting

### "File not found" errors

This is expected! Real config files are not in the repository.

**For production:**
→ Use GitHub Actions + GitHub Secrets (no local files needed)
→ See [PRODUCTION-DEPLOYMENT.md](../PRODUCTION-DEPLOYMENT.md)

**For testing:**
→ Create from templates: `cp examples/*.example <filename>`

### "Permission denied"

Check file permissions:
```bash
chmod 600 user-mapping.json
chmod 600 m365-config.json
```

## See Also

- [PRODUCTION-DEPLOYMENT.md](../PRODUCTION-DEPLOYMENT.md) - Production setup
- [SECURITY.md](../SECURITY.md) - Security policy
- [examples/](examples/) - Template files
